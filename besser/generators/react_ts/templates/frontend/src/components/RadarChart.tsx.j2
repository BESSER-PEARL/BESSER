import React, { useEffect, useState } from "react";
import {
  RadarChart as RechartsRadarChart,
  Radar,
  PolarGrid,
  PolarAngleAxis,
  PolarRadiusAxis,
  ResponsiveContainer,
  Tooltip,
  Legend,
} from "recharts";

interface RadarChartComponentProps {
  endpoint?: string;
  featuresKey?: string;
  valuesKey?: string;
  borderColor?: string;
  fillColor?: string;
  showGrid?: boolean;
  showTooltip?: boolean;
  showRadiusAxis?: boolean;
  width?: number;
  height?: number;
}

{% raw %}
const RadarChartComponent: React.FC<RadarChartComponentProps> = ({
  endpoint = "",
  featuresKey = "subject",
  valuesKey = "A",
  borderColor = "#8884d8",
  fillColor = "#8884d8",
  showGrid = true,
  showTooltip = true,
  showRadiusAxis = true,
  width = 350,
  height = 350,
}) => {
  const [data, setData] = useState<any[]>([]);

  useEffect(() => {
    fetch(endpoint)
      .then((res) => res.json())
      .then((json) => {
        setData(json);
      });
  }, [endpoint]);

  return (
    <div style={{ width: "100%", height: "100%" }}>
      <h3
        style={{
          textAlign: "center",
          margin: "4px 0",
          fontSize: 10,
          color: borderColor,
        }}
      >
      </h3>
      <ResponsiveContainer width="100%" height="100%">
        <RechartsRadarChart data={data}>
          {showGrid && <PolarGrid />}
          <PolarAngleAxis dataKey={featuresKey} tick={{ fontSize: 12, fill: borderColor }} />
          {showRadiusAxis && <PolarRadiusAxis />}
          {showTooltip && <Tooltip />}
          <Legend />
          <Radar
            name={valuesKey}
            dataKey={valuesKey}
            stroke={borderColor}
            fill={fillColor}
            fillOpacity={0.6}
          />
        </RechartsRadarChart>
      </ResponsiveContainer>
    </div>
  );
};

export default RadarChartComponent;
{% endraw %}