import React, { createContext, useContext, useState } from "react";

interface TableContextValue {
  selectedRows: Record<string, any>;
  setSelectedRow: (tableId: string, row: any) => void;
  getSelectedRow: (tableId: string) => any;
}

const TableContext = createContext<TableContextValue | undefined>(undefined);

export const TableProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [selectedRows, setSelectedRows] = useState<Record<string, any>>({});

  const setSelectedRow = (tableId: string, row: any) => {
    setSelectedRows((prev) => ({
      ...prev,
      [tableId]: row,
    }));
  };

  const getSelectedRow = (tableId: string) => {
    return selectedRows[tableId];
  };

  return (
    <TableContext.Provider value={{ selectedRows, setSelectedRow, getSelectedRow }}>
      {children}
    </TableContext.Provider>
  );
};

export const useTableContext = () => {
  const context = useContext(TableContext);
  if (!context) {
    throw new Error("useTableContext must be used within a TableProvider");
  }
  return context;
};
