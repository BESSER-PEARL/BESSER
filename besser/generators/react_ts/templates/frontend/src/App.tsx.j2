
{% import "frontend/src/element.tsx.j2" as helper -%}
import React from "react";
import LineChartComponent from "./components/LineChart";
import BarChartComponent from "./components/BarChart";
import PieChartComponent from "./components/PieChart";
import RadarChartComponent from "./components/RadarChart";
import RadialBarChartComponent from "./components/RadialBarChart";

// Helper to render a view element recursively
const renderElement = (el: any) => {
  if (el.type === "container") {
    return (
      <div key={el.id} style={el.style}>
        {el.children?.map((child: any) => renderElement(child))}
      </div>
    );
  }
  if (el.type === "text") {
    return (
      <div key={el.id} style={el.style}>
        {el.content}
      </div>
    );
  }
  if (el.type === "line_chart") {
    return <LineChartComponent key={el.id} {...el} />;
  }
  if (el.type === "bar_chart") {
    return <BarChartComponent key={el.id} {...el} />;
  }
  if (el.type === "pie_chart") {
    return <PieChartComponent key={el.id} {...el} />;
  }
  if (el.type === "radar_chart") {
    return <RadarChartComponent key={el.id} {...el} />;
  }
  if (el.type === "radial_bar_chart") {
    return <RadialBarChartComponent key={el.id} {...el} />;
  }
  return null;
};

const App: React.FC = () => {
  // General element list: can be "chart", "container" or "text"
  const elements = [
{% for element in view_elements %}
{{ helper.render_element(element, get_style_dict) }}{{ "," if not loop.last }}
{% endfor %}
  ];
  return (
    <div
      style={{
        position: "relative",
        width: "100%",
        aspectRatio: "9 / 10",
        margin: "0 auto",
        background: "{{ screen.styling.color.background_color }}",
        overflow: "hidden",
      }}
    >
      {elements.map((el) => renderElement(el))}
    </div>
  );
};
export default App;
